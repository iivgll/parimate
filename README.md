# Parimate - Flutter Web Application

Это Flutter-приложение, предназначенное для запуска в веб-окружении.

## Запуск приложения локально (для разработки)

1.  **Убедитесь, что у вас установлен Flutter SDK.** Если нет, следуйте [официальной инструкции](https://docs.flutter.dev/get-started/install).
2.  **Перейдите в корневую директорию проекта** в вашем терминале.
3.  **Получите зависимости:**
    ```bash
    flutter pub get
    ```
4.  **Запустите приложение в веб-режиме.** Чаще всего используется Chrome:
    ```bash
    flutter run -d chrome
    ```
    Или выберите другое доступное устройство (например, `edge`, `web-server`).

Приложение откроется в вашем браузере.

## Сборка приложения для релиза

Для создания оптимизированной версии веб-приложения для развертывания выполните команду:

```bash
flutter build web --release
```

Эта команда соберет файлы веб-приложения в директорию `build/web` в корне проекта. Эта папка содержит все необходимые HTML, JavaScript и ассеты для работы приложения.

## Развертывание на сервере

В проекте используется Docker и Nginx для развертывания собранного веб-приложения.

**Процесс развертывания:**

1.  **Сборка Docker-образа:**
    *   `Dockerfile` в корне проекта описывает, как создать образ. Он использует базовый образ `nginx:alpine`.
    *   Содержимое папки `build/web` (результат команды `flutter build web --release`) копируется внутрь образа в директорию `/usr/share/nginx/html`.
    *   Файл `nginx.conf` (также в корне проекта) используется для настройки Nginx внутри контейнера, чтобы он корректно раздавал статические файлы Flutter-приложения.

2.  **Скрипт `deploy.sh`:**
    *   Этот скрипт автоматизирует процесс развертывания.
    *   **Сборка образа:** Он выполняет `docker build --platform linux/amd64 -t parimate-web .`, создавая Docker-образ с тегом `parimate-web`, оптимизированный для стандартной серверной архитектуры.
    *   **Сохранение и копирование:** Образ сохраняется в `parimate-web.tar` и копируется на сервер (`root@185.112.102.11`) с помощью `scp`.
    *   **Выполнение на сервере:**
        *   Через `ssh` скрипт подключается к серверу.
        *   **Остановка старых контейнеров:** Он находит и принудительно останавливает/удаляет предыдущий контейнер с именем `parimate-web` и любые другие контейнеры, работающие на порту `8081`.
        *   **Загрузка нового образа:** Загружает скопированный `parimate-web.tar` в Docker на сервере.
        *   **Запуск нового контейнера:** Запускает новый контейнер из загруженного образа с именем `parimate-web`, пробрасывая порт `8081` сервера на порт `80` контейнера (`-p 8081:80`).
    *   **Очистка:** Локальный файл `parimate-web.tar` удаляется.

**Для развертывания:**

1.  Убедитесь, что у вас настроен `ssh`-доступ к серверу `root@185.112.102.11` без пароля (по ключу) или будьте готовы ввести пароль при выполнении `scp` и `ssh`.
2.  Убедитесь, что на сервере установлен и запущен Docker.
3.  Сначала соберите веб-приложение:
    ```bash
    flutter build web --release
    ```
4.  Запустите скрипт развертывания:
    ```bash
    ./deploy.sh
    ```

После успешного выполнения скрипта ваше обновленное веб-приложение должно быть доступно по адресу сервера на порту `8081`.

---
*Тестовая карта (возможно, для платежных тестов): 2202 4743 0132 2987*
